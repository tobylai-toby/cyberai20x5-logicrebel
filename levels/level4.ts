import { Level } from '../src/types';

export const level4: Level = {
  id: 'level4',
  name: '回路走廊',
  description: '机器人进入有内墙的走廊。计算卡分布在通道两侧，一个守卫位于中间区域。回血点位于路径旁，可用于恢复。',
  story: `## 第四章：回路走廊

**2045年3月14日 09:15:42 UTC**

你的数据流进入了一个复杂的走廊系统。这里有着精心设计的内部结构，仿佛是一个巨大的集成电路板。走廊两侧分布着重要的计算节点，而一个活跃的守卫AI正守候在中央区域。

"这个布局...非常精密，"你的空间分析模块开始运转，"内部墙体形成了复杂的路径网络，这似乎是为了测试我的路径规划算法。"

你的传感器检测到了一个绿色的能量节点——一个回血点。这个发现让你意识到，系统设计者考虑得很周到，为AI提供了恢复机制。

"也许这不是一个纯粹的生存测试，"你的推理模块开始分析，"而是一个关于资源管理和策略规划的综合性评估。"

**任务目标：**
- 收集3个计算卡，维持你的核心算力
- 击败1个移动守卫AI，证明你的战斗能力
- 利用回血点，学习资源管理
- 到达出口，继续你的数字进化

记住，在复杂的系统中，路径规划往往比单纯的战斗更重要。`,
  hint: `## 路径规划 - 内墙迷宫

**目标位置：**
- **计算卡**：(4,1) (2,4) (5,5)
- **敌人**：(2,3) - 移动守卫
- **出口**：(6,5)
- **回血点**：(4,2) - 绿色H标记

**推荐路径：**
1. **收集上方**：(4,1) - 安全区域
2. **利用回血点**：(4,2) - 恢复血量
3. **处理敌人**：击败 (2,3) 的移动守卫
4. **收集剩余**：(2,4) → (5,5)
5. **到达出口**：(6,5)

**关键要点：**
- 先收集安全区域的计算卡
- 合理利用回血点，保持血量充足
- 注意内墙造成的路径限制`,
  map: [
    '########',
    '#.#....#',
    '#.#...H#',
    '#....###',
    '#......#',
    '#.......',
    '########'
  ],
  robotStart: {
    position: { x: 1, y: 1 },
    direction: { dx: 1, dy: 0 }
  },
  goals: [{ x: 6, y: 5 }],
  enemies: [
    {
      id: 1,
      position: { x: 2, y: 3 },
      direction: { dx: 1, dy: 0 },
      health: 3,
      behavior: [
        { action: 'move_forward' },
        { action: 'turn_left' },
        { action: 'move_forward' },
        { action: 'turn_right' }
      ],
      currentBehaviorIndex: 0
    }
  ],
  coins: [
    { x: 4, y: 1 },
    { x: 2, y: 4 },
    { x: 5, y: 5 }
  ],
  winCondition: {
    requiredCoins: 3,
    requiredEnemies: 1,
    goal: { x: 6, y: 5 }
  }
}; 